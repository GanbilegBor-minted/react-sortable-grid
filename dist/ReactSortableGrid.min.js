!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react")):"function"==typeof define&&define.amd?define(["react"],e):"object"==typeof exports?exports["react-sortable-grid"]=e(require("react")):t["react-sortable-grid"]=e(t.React)}(this,function(t){return function(t){function e(r){if(o[r])return o[r].exports;var i=o[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var o={};return e.m=t,e.c=o,e.p="",e(0)}([function(t,e,o){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=o(2),n=r(i);e["default"]=n["default"],t.exports=e["default"]},function(e,o){e.exports=t},function(t,e,o){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])}return t},a=function(){function t(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,o,r){return o&&t(e.prototype,o),r&&t(e,r),e}}(),u=function(t,e,o){for(var r=!0;r;){var i=t,n=e,s=o;r=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,n);if(void 0!==a){if("value"in a)return a.value;var u=a.get;return void 0===u?void 0:u.call(s)}var l=Object.getPrototypeOf(i);if(null===l)return void 0;t=l,e=n,o=s,r=!0,a=l=void 0}},l=o(1),c=r(l),p=o(3),f=r(p),g=0,d=function(t){function e(t){i(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.state={blocks:this._generateBlocks(t),draggingBlock:null,dragStartCursorPosition:null,lastDraggingBlock:null}}return n(e,t),a(e,[{key:"dragStart",value:function(t,e){return e.preventDefault&&e.preventDefault(),this.props.children&&t.position>=this.props.children.length?!1:void this.setState({draggingBlock:t,draggingBlockDragStartPosition:t.position,dragStartCursorPosition:{x:e.clientX,y:e.clientY},dragCursorDiffPosition:{x:0,y:0}})}},{key:"dragHandle",value:function(t){var e=this,o=.25;if(null!==this.state.draggingBlock){var r={x:(t.clientX-this.state.dragStartCursorPosition.x)/this.refs.container.offsetWidth*100,y:(t.clientY-this.state.dragStartCursorPosition.y)/this.refs.container.offsetHeight*100},i={dragCursorDiffPosition:{x:r.x,y:(t.clientY-this.state.dragStartCursorPosition.y)/this.refs.container.offsetWidth*100}},n=this._getOffestForPosition(this.state.draggingBlockDragStartPosition);n.x+=r.x/100*this.props.columns,n.y+=r.y/100*this.props.rows;var s=this.state.blocks.filter(function(t){if(e.state.draggingBlock&&t.id===e.state.draggingBlock.id)return!1;if(t.position>=e.props.children.length)return!1;var r=e._getOffestForPosition(t.position);return Math.abs(r.x-n.x)<o&&Math.abs(r.y-n.y)<o})[0];if(void 0!==s){var a=this.state.draggingBlock.position,u=s.position,l={};i.blocks=this.state.blocks.map(function(t){return t.previousPosition=t.position,t.position>a&&t.position<=s.position?t.position--:t.position<=a&&t.position>=s.position&&t.position++,t.id===e.state.draggingBlock.id&&(t.position=u),l[t.previousPosition]=t.position,t}),this.props.onReorder(l)}this.setState(i)}}},{key:"stopDrag",value:function(){this.setState({draggingBlock:null,draggingBlockDragStartPosition:null,lastDraggingBlock:this.state.draggingBlock})}},{key:"render",value:function(){var t=this,e=100/this.props.columns,o=100/this.props.rows,r=this.state.blocks;return c["default"].createElement("div",{onMouseMove:this.dragHandle.bind(this),onMouseUp:this.stopDrag.bind(this),onMouseLeave:this.stopDrag.bind(this),style:{width:"100%",height:"100%",position:"relative"},ref:"container"},r.map(function(r,i){var n=r.position,a={},u=t._findItem(n);t.state.draggingBlock&&t.state.draggingBlock.id===r.id&&(a={marginTop:t.state.dragCursorDiffPosition.y+"%",marginLeft:t.state.dragCursorDiffPosition.x+"%",zIndex:3,transition:"none"},n=t.state.draggingBlockDragStartPosition),r.position!==r.previousPosition&&t._isEdgePositon(r.position)&&t._isEdgePositon(r.previousPosition)&&(a=s({zIndex:1},a)),null===t.state.draggingBlock&&t.state.lastDraggingBlock&&t.state.lastDraggingBlock.id===r.id&&(a=s({zIndex:2},a));var l=t._getOffestForPosition(n),p=l.x,f=l.y;return a=s({top:o*f+"%",left:e*p+"%",zIndex:0,width:e+"%",height:o+"%",marginTop:"0%",marginLeft:"0%",position:"absolute",borderSizing:"border-box",transition:"top 500ms ease, left 500ms ease, margin 500ms ease"},a),c["default"].createElement("div",{style:s({marginTop:1},a),key:r.id,onMouseDown:t.dragStart.bind(t,r)},u)}))}},{key:"_findItem",value:function(t){if(!this.props.children)return null;var e=this.props.children.filter?this.props.children:[this.props.children];return e.filter(function(e){return e.props.position===t})[0]}},{key:"_isEdgePositon",value:function(t){var e=t%this.props.columns;return 0===e||e===this.props.columns-1}},{key:"_generateBlocks",value:function(t){for(var e=t.columns*t.rows,o=[],r=0;e>r;r++)o.push({id:g++,position:r,previousPosition:r});return o}},{key:"_getOffestForPosition",value:function(t){return{x:t%this.props.columns,y:Math.floor(t/this.props.columns)}}}]),e}(l.Component);e["default"]=d,d.SortableGridItem=f["default"],t.exports=e["default"]},function(t,e,o){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,o,r){return o&&t(e.prototype,o),r&&t(e,r),e}}(),s=function(t,e,o){for(var r=!0;r;){var i=t,n=e,s=o;r=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,n);if(void 0!==a){if("value"in a)return a.value;var u=a.get;return void 0===u?void 0:u.call(s)}var l=Object.getPrototypeOf(i);if(null===l)return void 0;t=l,e=n,o=s,r=!0,a=l=void 0}},a=o(1),u=function(t){function e(){r(this,e),s(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return i(e,t),n(e,[{key:"render",value:function(){return this.props.children}}]),e}(a.Component);e["default"]=u,t.exports=e["default"]}])});